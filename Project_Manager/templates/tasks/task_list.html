{% extends 'base.html' %}
{% load task_url %}

{% block content %}

{% include 'tasks/includes/header-tasks.html' %}

<div class="max-w mx-auto p-4 space-y-4">

  <div id="head" class="flex items-center bg-gray-100 shadow-sm rounded-2xl border border-gray-300 p-2">
    <div class="w-1/12"></div> <!-- Пустой блок под аватар -->
    <div class="w-5/12">
      <h3 class="text-lg font-semibold text-black">Название</h3>
    </div>
    <div class="w-2/12">
      <span class="text-gray-600">Исполнители</span>
    </div>
    <div class="w-2/12">
      <span class="text-gray-600">Статус</span>
    </div>
    <div class="w-2/12">
      <span class="text-gray-600">Приоритет</span>
    </div>
  </div>

  <!-- Задача -->
  {% for task in tasks %}
  <div id="taskDiv-{{task.pk}}" class="flex items-center bg-gray-50 shadow-sm rounded-2xl border border-gray-300 p-4">
  
    <!-- Аватар -->
    <div class="w-1/12 flex justify-center">
      <div id="avatar-{{task.pk}}" class="avatar {% if task.status.is_completed %}grayscale{% endif %}">
        <div class="w-12 h-12 bg-{{task.color}}-500 rounded-full ring ring-{{task.color}}-300 ring-offset-1"></div>
      </div>
    </div>
  
    <!-- Название и теги -->
    <div class="w-5/12">
      <h3 id="titleTask-{{task.pk}}" class="text-lg font-semibold text-black 
        {% if task.status.is_completed %}line-through text-gray-500{% endif %}">
        <a href="{% url_task task 'task_detail' %}">{{ task.name }}</a>
      </h3>
      <div id="tagList-{{task.pk}}" class="flex gap-2 text-sm text-gray-400 mt-1 mb-1 {% if task.status.is_completed %}grayscale{% endif %}">
        {% for t in task.tag.all %}
        <span class="inline-flex items-center rounded-md px-2 py-1 text-sm font-medium border {{ t.color.bg_color }} {{ t.color.border_color }} {{ t.color.text_color }}"
        >{{ t.name }}</span>
        {% endfor %}
      </div>
    </div>
  
    <!-- Исполнители -->
    <div class="w-2/12 flex justify-start">
      <div id="exAvatar-{{task.pk}}" class="avatar {% if task.status.is_completed %}grayscale{% endif %}">
        <div class="w-12 h-12 rounded-full ring ring-primary ring-offset-base-100 ring-offset-2"></div>
      </div>
    </div>
  
    <!-- Статус -->
    <div id="status-{{task.pk}}" class="w-2/12">
      {% include 'tasks/includes/change-status.html' %}
    </div>
  
    <!-- Приоритет -->
    <div id="priority-{{task.pk}}" class="w-2/12 {% if task.status.is_completed %}grayscale{% endif %}">
      <span class="badge badge-error text-[1.075rem] px-4 py-[0.75rem]">{{task.priority}}</span>
    </div>
  </div>
  {% endfor %}
  

    {% include 'tasks/includes/add-status-modal.html' %}
</div>



{% endblock content %}